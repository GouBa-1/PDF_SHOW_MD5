import subprocess
import shlex
final_name="31_x.bin"
create_name="md5pdf.pdf"
copy_name="copy.bin"
create_data=b""

final_data=open(final_name,"rb").read()
tail_data=open("./hex/tail.bin","rb").read()
final_data+=tail_data
open(copy_name,"wb").write(final_data)

command1="md5sum "+copy_name
command1=shlex.split(command1)
p=subprocess.Popen(command1,stdout=subprocess.PIPE)
md5=p.stdout.read(32)
md5=str(md5)
md5=md5[2:-1]
print(md5)

command2="cat "+create_name
command2=shlex.split(command2)
subprocess.Popen(command2)

for i in range (32):
    choose_bin=str(i)+"_"+str(int(md5[i],16))+".bin"
    print("choose bin is: "+choose_bin)
    choose_data=open(choose_bin,"rb").read()
    create_data+=choose_data[i*0x3300:(i+1)*0x3300]
    print("["+hex(i*0x3300)+" , "+hex((i+1)*0x3300)+"]")

create_data+=tail_data
open(create_name,"wb").write(create_data)

